

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Minecraft Resource Pack Combiner </title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- JSZip (for handling zip files client-side) -->
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <style>
    /* Smooth scrolling for better UX */
    html { scroll-behavior: smooth; }
    /* Hide default file input, we’ll use a styled button */
    input[type="file"].hidden-input { position: absolute; left: -9999px; }
    /* Simple drag-over style */
    .drop-over { outline: 2px dashed rgba(255,255,255,0.5); outline-offset: 8px; }
    /* Make the file table horizontally scrollable on small screens */
    .file-table-wrap { overflow: hidden; }
    .file-table-scroll { overflow-x: auto; -webkit-overflow-scrolling: touch; }
    /* Sticky first column for better readability on wide lists */
    .sticky-col { position: sticky; left: 0; z-index: 10; background: rgba(17, 24, 39, 0.7); backdrop-filter: blur(6px); }
    /* Custom thin scrollbar for large lists */
    .file-table-scroll::-webkit-scrollbar { height: 10px; }
    .file-table-scroll::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 9999px; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-emerald-900 via-slate-900 to-indigo-900 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <header class="mb-8">
      <div class="flex items-center justify-between gap-4">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-xl bg-emerald-500/20 flex items-center justify-center ring-1 ring-emerald-400/30">
            <!-- Pickaxe-like SVG -->
            <svg viewBox="0 0 24 24" class="w-6 h-6 text-emerald-300" fill="currentColor" aria-hidden="true">
              <path d="M14.5 4.5 20 10l-2 2-5.5-5.5 2-2zm-2.793 3.207L5.207 14.207a1 1 0 0 0-.293.707V19a1 1 0 0 0 1 1h4.086a1 1 0 0 0 .707-.293l6.5-6.5-5.5-5.5z"></path>
            </svg>
          </div>
          <div>
            <h1 class="text-2xl sm:text-3xl font-bold tracking-tight">Minecraft Resource Pack Combiner</h1>
            <p class="text-sm text-emerald-200/80">Upload packs, pick sources, set name/icon, merge, and download. Default description: “merged by og krish's webisite”.</p>
          </div>
        </div>
        <div class="flex items-center gap-3">
            <button id="modrinthBtn" class="inline-flex items-center gap-2 rounded-lg bg-indigo-500 hover:bg-indigo-400 text-indigo-950 px-4 py-2 font-semibold transition">
                <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
                Browse Modrinth
              </button>
            <a href="#merge" class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-emerald-950 px-4 py-2 font-semibold transition">
            Go to Merge
            <svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor" aria-hidden="true"><path d="M13 5l7 7-7 7M5 12h14"></path></svg>
            </a>
        </div>
      </div>
    </header>

    <!-- Steps -->
    <ol class="grid lg:grid-cols-5 md:grid-cols-3 grid-cols-1 gap-4 mb-8">
      <li class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
        <p class="text-xs uppercase tracking-wider text-emerald-300 mb-1">Step 1</p>
        <p class="font-semibold">Upload packs</p>
      </li>
      <li class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
        <p class="text-xs uppercase tracking-wider text-emerald-300 mb-1">Step 2</p>
        <p class="font-semibold">Arrange base & layers</p>
      </li>
      <li class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
        <p class="text-xs uppercase tracking-wider text-emerald-300 mb-1">Step 3</p>
        <p class="font-semibold">Choose per-file sources</p>
      </li>
      <li class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
        <p class="text-xs uppercase tracking-wider text-emerald-300 mb-1">Step 4</p>
        <p class="font-semibold">Edit name, icon, description</p>
      </li>
      <li class="rounded-xl bg-white/5 ring-1 ring-white/10 p-4">
        <p class="text-xs uppercase tracking-wider text-emerald-300 mb-1">Step 5</p>
        <p class="font-semibold">Merge & download</p>
      </li>
    </ol>

    <!-- Upload + Layers + Editor -->
    <section class="grid lg:grid-cols-12 gap-6">
      <!-- Left: Upload + Layers -->
      <div class="lg:col-span-4 space-y-6">
        <!-- Upload -->
        <div class="rounded-2xl bg-white/5 ring-1 ring-white/10 p-5">
          <h2 class="text-lg font-semibold mb-3">Upload Resource Packs (.zip)</h2>
          <p class="text-sm text-white/70 mb-4">The first uploaded pack becomes the Base. You can reorder to set Base and Layer 1, 2, etc.</p>

          <div id="dropZone" class="group relative rounded-xl border border-dashed border-white/20 bg-white/5 p-5 text-center hover:border-emerald-300/40 transition">
            <input id="fileInput" class="hidden-input" type="file" accept=".zip" multiple />
            <div class="flex flex-col items-center gap-2">
              <div class="h-12 w-12 rounded-full bg-emerald-500/10 text-emerald-300 flex items-center justify-center">
                <svg viewBox="0 0 24 24" class="w-7 h-7" fill="currentColor" aria-hidden="true"><path d="M12 16V4m0 0l-4 4m4-4l4 4M4 20h16"></path></svg>
              </div>
              <div class="flex gap-2 flex-wrap justify-center">
                <button id="browseBtn" class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-emerald-950 px-4 py-2 font-semibold transition">Browse .zip files</button>
              </div>
              <p class="text-xs text-white/60">or drag & drop here</p>
            </div>
          </div>

          <div id="uploadNotice" class="hidden mt-3 text-sm text-rose-300"></div>
        </div>

        <!-- Layers -->
        <div class="rounded-2xl bg-white/5 ring-1 ring-white/10 p-5">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-lg font-semibold">Base & Layers</h2>
            <button id="clearAllBtn" class="text-sm text-rose-300 hover:text-rose-200 underline underline-offset-2">Clear all</button>
          </div>

          <div id="layersList" class="space-y-3">
            <!-- Packs will appear here -->
          </div>

          <p class="mt-3 text-xs text-white/60">Tip: Higher layers override lower ones by default. You can also pick exact sources per file.</p>
        </div>
      </div>

      <!-- Right: File chooser + Editor -->
      <div class="lg:col-span-8 space-y-6">
        <!-- File chooser -->
        <div class="rounded-2xl bg-white/5 ring-1 ring-white/10 p-5">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-3 mb-3">
            <h2 class="text-lg font-semibold">Choose Sources Per File</h2>
            <div class="flex items-center gap-2">
              <input id="searchInput" type="text" placeholder="Search file path..." class="w-56 px-3 py-2 rounded-lg bg-white/10 placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-emerald-400/60" />
              <button id="resetByOrderBtn" class="rounded-lg bg-slate-700/60 hover:bg-slate-700 px-3 py-2 text-sm">Auto-pick by order</button>
            </div>
          </div>

          <div class="file-table-wrap">
            <div class="file-table-scroll" id="fileTableScroll">
              <table class="w-full text-sm">
                <thead>
                  <tr id="fileTableHeadRow" class="text-left text-white/70 border-b border-white/10">
                    <!-- Headers injected -->
                  </tr>
                </thead>
                <tbody id="fileTableBody">
                  <tr><td class="py-6 text-white/60">Upload packs to see files here.</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div id="fileTableFooter" class="mt-3 flex items-center justify-between hidden">
            <p id="fileCountText" class="text-xs text-white/60"></p>
            <div class="flex items-center gap-2">
              <button id="loadMoreBtn" class="hidden rounded-lg bg-slate-700/60 hover:bg-slate-700 px-3 py-1.5 text-xs">Load more</button>
              <button id="backToTopBtn" class="rounded-lg bg-slate-700/60 hover:bg-slate-700 px-3 py-1.5 text-xs">Back to top</button>
            </div>
          </div>
        </div>

        <!-- Editor -->
        <div class="rounded-2xl bg-white/5 ring-1 ring-white/10 p-5" id="editor">
          <h2 class="text-lg font-semibold mb-3">Merged Pack Editor</h2>
          <form id="editorForm" class="grid md:grid-cols-2 gap-5" autocomplete="off">
            <div class="space-y-4">
              <div>
                <label class="block text-sm mb-1">Pack Name</label>
                <input id="packName" type="text" class="w-full px-3 py-2 rounded-lg bg-white/10 focus:outline-none focus:ring-2 focus:ring-emerald-400/60" placeholder="Merged Pack" />
                <p class="text-xs text-white/60 mt-1">Used as the download filename.</p>
              </div>
              <div>
                <label class="block text-sm mb-1">Description</label>
                <textarea id="packDesc" rows="3" class="w-full px-3 py-2 rounded-lg bg-white/10 focus:outline-none focus:ring-2 focus:ring-emerald-400/60" placeholder="merged by og krish's webisite"></textarea>
                <p class="text-xs text-white/60 mt-1">This goes inside pack.mcmeta.</p>
              </div>
              <div>
                <label class="block text-sm mb-1">Pack Format</label>
                <select id="packFormat" class="w-full px-3 py-2 rounded-lg bg-white/10 focus:outline-none focus:ring-2 focus:ring-emerald-400/60">
                  <option value="15" selected>15 (Minecraft 1.21+)</option>
                  <option value="13">13 (Minecraft 1.20.x)</option>
                  <option value="12">12 (Minecraft 1.19.3–1.19.4)</option>
                  <option value="9">9 (Minecraft 1.19–1.19.2)</option>
                  <option value="8">8 (Minecraft 1.18.x)</option>
                  <option value="7">7 (Minecraft 1.17.x)</option>
                  <option value="6">6 (Minecraft 1.16.2–1.16.5)</option>
                </select>
                <p class="text-xs text-white/60 mt-1">If unsure, leave as is.</p>
              </div>
            </div>

            <div class="space-y-4">
              <div>
                <label class="block text-sm mb-1">Pack Icon (pack.png)</label>
                <div class="flex items-center gap-4">
                  <div id="iconPreview" class="h-20 w-20 rounded-lg ring-1 ring-white/10 bg-white/10 flex items-center justify-center text-white/60">
                    <!-- Placeholder SVG -->
                    <svg viewBox="0 0 24 24" class="w-8 h-8" fill="currentColor" aria-hidden="true">
                      <path d="M12 3l9 4.5v9L12 21 3 16.5v-9L12 3zm0 2.236L5 8.118v7.764L12 18.764l7-2.882V8.118L12 5.236z"></path>
                    </svg>
                  </div>
                  <div class="flex-1">
                    <div class="flex gap-2">
                      <input id="iconFileInput" type="file" accept="image/png" class="hidden-input" />
                      <button id="iconUploadBtn" type="button" class="rounded-lg bg-slate-700/60 hover:bg-slate-700 px-3 py-2 text-sm">Upload PNG</button>
                      <select id="iconSourceSelect" class="rounded-lg bg-white/10 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-400/60">
                        <option value="custom" selected>Use uploaded icon</option>
                        <option value="none">No icon</option>
                      </select>
                    </div>
                    <p class="text-xs text-white/60 mt-1">Or pick icon from a pack below if available.</p>
                  </div>
                </div>
                <div class="mt-2" id="iconPackRow" class="hidden"></div>
              </div>
              <div class="rounded-lg bg-emerald-500/10 text-emerald-200 p-3 text-sm">
                Default description set to: “merged by og krish's webisite”. You can edit it anytime.
              </div>
            </div>
          </form>
        </div>

        <!-- Merge -->
        <div class="rounded-2xl bg-white/5 ring-1 ring-white/10 p-5" id="merge">
          <div class="flex flex-col md:flex-row md:items-center justify-between gap-3 mb-3">
            <h2 class="text-lg font-semibold">Merge & Download</h2>
            <div class="flex items-center gap-2">
              <button id="mergeBtn" class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 hover:bg-emerald-400 text-emerald-950 px-4 py-2 font-semibold transition disabled:opacity-60 disabled:cursor-not-allowed" disabled>
                <svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor" aria-hidden="true"><path d="M12 4v7H5v2h7v7h2v-7h7v-2h-7V4z"/></svg>
                Merge
              </button>
              <a id="downloadBtn" class="inline-flex items-center gap-2 rounded-lg bg-indigo-500 hover:bg-indigo-400 text-indigo-950 px-4 py-2 font-semibold transition disabled:opacity-60 disabled:cursor-not-allowed pointer-events-none" download>
                <svg viewBox="0 0 24 24" class="w-5 h-5" fill="currentColor" aria-hidden="true"><path d="M12 3v12l4-4h-3V3h-2v8H8l4 4zM5 19h14v2H5z"/></svg>
                Download
              </a>
            </div>
          </div>

          <div id="progressWrap" class="hidden">
            <div class="flex items-center justify-between mb-1">
              <span class="text-sm text-white/80">Merging...</span>
              <span id="progressText" class="text-sm text-white/60">0%</span>
            </div>
            <div class="w-full h-3 bg-white/10 rounded-full overflow-hidden">
              <div id="progressBar" class="h-3 bg-emerald-400 rounded-full transition-all" style="width:0%"></div>
            </div>
            <p id="progressDetail" class="mt-2 text-xs text-white/60"></p>
          </div>

          <div id="mergeNote" class="text-xs text-white/60 mt-3">
            After merging, your download will be ready instantly. Everything happens on your device.
          </div>
        </div>
      </div>
    </section>

    <!-- Toast -->
    <div id="toast" class="fixed bottom-4 left-1/2 -translate-x-1/2 z-50 hidden">
      <div class="rounded-lg bg-black/70 text-white px-4 py-2 text-sm ring-1 ring-white/10 shadow-lg"></div>
    </div>

    <!-- Footer -->
    <footer class="mt-12 text-center text-xs text-white/50">
      Built by OG_KRISH. This  works fully in your browser. No files are uploaded anywhere.
    </footer>
  </div>

  <script>
    // ------- State -------
    const state = {
      packs: [], // [{id, name, file, zip, files: Set(paths), hasIcon, iconPath, iconData?, orderIndex}]
      selection: new Map(), // path -> packId
      allPaths: [], // union of file paths (excl. pack.mcmeta, pack.png)
      filteredPaths: [],
      renderLimit: 200,
      userIcon: null, // {dataUrl, bytes}
      iconSource: 'custom', // 'custom' | 'none' | packId
      outZipBlobUrl: null,
      // Modrinth state
      modrinthCurrentPage: 0,
      modrinthTotalResults: 0,
      modrinthSelectedPacks: new Set(),
      modrinthPacksCache: new Map(),
    };

    // ------- Elements -------
    const fileInput = document.getElementById('fileInput');
    const browseBtn = document.getElementById('browseBtn');
    const modrinthBtn = document.getElementById('modrinthBtn'); // Now only in header
    const dropZone = document.getElementById('dropZone');
    const uploadNotice = document.getElementById('uploadNotice');

    const layersList = document.getElementById('layersList');
    const clearAllBtn = document.getElementById('clearAllBtn');

    const searchInput = document.getElementById('searchInput');
    const fileTableHeadRow = document.getElementById('fileTableHeadRow');
    const fileTableBody = document.getElementById('fileTableBody');
    const fileTableFooter = document.getElementById('fileTableFooter');
    const fileCountText = document.getElementById('fileCountText');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    const backToTopBtn = document.getElementById('backToTopBtn');
    const fileTableScroll = document.getElementById('fileTableScroll');

    const packName = document.getElementById('packName');
    const packDesc = document.getElementById('packDesc');
    const packFormat = document.getElementById('packFormat');
    const editorForm = document.getElementById('editorForm');

    const iconPreview = document.getElementById('iconPreview');
    const iconUploadBtn = document.getElementById('iconUploadBtn');
    const iconFileInput = document.getElementById('iconFileInput');
    const iconSourceSelect = document.getElementById('iconSourceSelect');
    const iconPackRow = document.getElementById('iconPackRow');

    const mergeBtn = document.getElementById('mergeBtn');
    const downloadBtn = document.getElementById('downloadBtn');
    const progressWrap = document.getElementById('progressWrap');

    // Modrinth Modal Elements
    const modrinthModal = document.getElementById('modrinthModal');
    const closeModrinthModal = document.getElementById('closeModrinthModal');
    const cancelModrinthModal = document.getElementById('cancelModrinthModal');
    const modrinthSearch = document.getElementById('modrinthSearch');
    const modrinthSearchBtn = document.getElementById('modrinthSearchBtn');
    const modrinthSort = document.getElementById('modrinthSort');
    const modrinthGameVersion = document.getElementById('modrinthGameVersion');
    const modrinthLoading = document.getElementById('modrinthLoading');
    const modrinthResults = document.getElementById('modrinthResults');
    const modrinthPagination = document.getElementById('modrinthPagination');
    const prevPage = document.getElementById('prevPage');
    const nextPage = document.getElementById('nextPage');
    const pageInfo = document.getElementById('pageInfo');
    const selectedCount = document.getElementById('selectedCount');
    const clearSelections = document.getElementById('clearSelections');
    const addSelectedPacks = document.getElementById('addSelectedPacks');
    const progressBar = document.getElementById('progressBar');
    const progressText = document.getElementById('progressText');
    const progressDetail = document.getElementById('progressDetail');

    const resetByOrderBtn = document.getElementById('resetByOrderBtn');

    const toast = document.getElementById('toast');
    const toastBox = toast.querySelector('div');

    // ------- Helpers -------
    function showToast(msg, color='white') {
      toastBox.textContent = msg;
      toastBox.style.color = color;
      toast.classList.remove('hidden');
      setTimeout(() => toast.classList.add('hidden'), 2400);
    }

    function sanitizeFileName(name) {
      return name.replace(/[\\/:*?"<>|]+/g, '_').trim() || 'Merged_Pack';
    }

    function isSpecialPath(p) {
      const lower = p.toLowerCase();
      return lower === 'pack.mcmeta' || lower === 'pack.png';
    }

    function unionAllPaths() {
      const all = new Set();
      state.packs.forEach(p => {
        p.files.forEach(fp => { if (!isSpecialPath(fp)) all.add(fp); });
      });
      const arr = Array.from(all).sort((a,b)=> a.localeCompare(b));
      state.allPaths = arr;
      applySearchFilter();
    }

    function applySearchFilter() {
      const q = (searchInput.value || '').toLowerCase().trim();
      if (!q) {
        state.filteredPaths = state.allPaths.slice(0, state.renderLimit);
      } else {
        const filtered = state.allPaths.filter(p => p.toLowerCase().includes(q));
        state.filteredPaths = filtered.slice(0, state.renderLimit);
      }
      updateFileCountFooter();
      renderFileTable();
    }

    function updateFileCountFooter() {
      const q = (searchInput.value || '').toLowerCase().trim();
      const total = state.allPaths.length;
      const shownCount = state.filteredPaths.length;
      fileTableFooter.classList.toggle('hidden', total === 0);
      fileCountText.textContent = q
        ? `Showing ${shownCount} of ${total} matching files`
        : `Showing ${shownCount} of ${total} files`;
      loadMoreBtn.classList.toggle('hidden', shownCount >= (q ? state.allPaths.filter(p => p.toLowerCase().includes(q)).length : total));
    }

    function loadMoreRows() {
      const q = (searchInput.value || '').toLowerCase().trim();
      const baseArr = q ? state.allPaths.filter(p => p.toLowerCase().includes(q)) : state.allPaths;
      const next = Math.min(baseArr.length, state.filteredPaths.length + state.renderLimit);
      state.filteredPaths = baseArr.slice(0, next);
      updateFileCountFooter();
      renderFileTable();
    }

    function getOrder() {
      // state.packs is always stored in order: index 0 = Base, 1 = Layer 1, etc.
      return state.packs.map(p => p.id);
    }

    function packById(id) {
      return state.packs.find(p => p.id === id);
    }

    function defaultProviderForPath(path) {
      // Highest layer that contains the file wins
      for (let i = state.packs.length - 1; i >= 0; i--) {
        if (state.packs[i].files.has(path)) return state.packs[i].id;
      }
      return null;
    }

    function ensureSelectionDefaults() {
      // For any path not chosen, assign default by order
      state.allPaths.forEach(path => {
        if (!state.selection.has(path)) {
          const provider = defaultProviderForPath(path);
          if (provider) state.selection.set(path, provider);
        }
      });
    }

    function resetSelectionByOrder() {
      state.selection.clear();
      ensureSelectionDefaults();
      renderFileTable(); // Updates radios
      showToast('Auto-picked sources by layer order', '#A7F3D0');
    }

    function updateHeadRow() {
      fileTableHeadRow.innerHTML = '';
      // First sticky column for Path
      const thPath = document.createElement('th');
      thPath.className = 'sticky-col left-0 py-3 px-3';
      thPath.textContent = 'Path';
      fileTableHeadRow.appendChild(thPath);
      // Create a header per pack
      state.packs.forEach((p, idx) => {
        const th = document.createElement('th');
        th.className = 'py-3 px-3 text-center whitespace-nowrap';
        th.innerHTML = `<div class="inline-flex items-center gap-2">
          <span class="inline-flex items-center justify-center h-6 w-6 rounded-full text-xs font-bold ${idx===0?'bg-emerald-500 text-emerald-950':'bg-white/10 text-white/80'}">${idx===0?'Base':idx}</span>
          <span class="opacity-90">${escapeHtml(p.name)}</span>
        </div>`;
        fileTableHeadRow.appendChild(th);
      });
    }

    function renderFileTable() {
      // Head
      updateHeadRow();
      // Body
      fileTableBody.innerHTML = '';
      if (state.filteredPaths.length === 0) {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td class="py-6 text-white/60">No files to display.</td>`;
        fileTableBody.appendChild(tr);
        return;
      }
      const orderIds = getOrder();

      state.filteredPaths.forEach((path, rowIdx) => {
        const tr = document.createElement('tr');
        tr.className = rowIdx % 2 ? 'bg-white/5' : '';
        // Path cell
        const tdPath = document.createElement('td');
        tdPath.className = 'sticky-col left-0 py-2 px-3 max-w-[40ch] truncate';
        tdPath.title = path;
        tdPath.textContent = path;
        tr.appendChild(tdPath);
        // Pack options
        orderIds.forEach((pid) => {
          const pack = packById(pid);
          const td = document.createElement('td');
          td.className = 'py-2 px-3 text-center';
          if (pack.files.has(path)) {
            const selected = (state.selection.get(path) === pid) ||
              (!state.selection.has(path) && defaultProviderForPath(path) === pid);
            td.innerHTML = `
              <label class="inline-flex items-center gap-2 cursor-pointer">
                <input type="radio" name="src-${cssHash(path)}" value="${pid}" ${selected?'checked':''} class="h-4 w-4 accent-emerald-400" />
                <span class="text-xs text-white/70">Use</span>
              </label>
            `;
            const input = td.querySelector('input');
            input.addEventListener('change', () => {
              state.selection.set(path, pid);
            });
          } else {
            td.innerHTML = `<span class="text-xs text-white/30">—</span>`;
          }
          tr.appendChild(td);
        });
        fileTableBody.appendChild(tr);
      });
    }

    function renderLayers() {
      layersList.innerHTML = '';
      if (state.packs.length === 0) {
        const empty = document
